<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text-to-Speech App</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    label { display: block; margin-top: 10px; }
    textarea { width: 100%; height: 100px; margin-top: 5px; }
    select, input[type=range], button { margin-top: 5px; display: block; }
  </style>
</head>
<body>
  <h1>Text-to-Speech Application</h1>

  <label for="text">Enter text:</label>
  <textarea id="text" placeholder="Type your text here..."></textarea>

  <label for="voiceSelect">Choose Voice:</label>
  <select id="voiceSelect"></select>

  <label for="rate">Rate: <span id="rateValue">1</span></label>
  <input type="range" id="rate" min="0.5" max="2" value="1" step="0.1">

  <label for="pitch">Pitch: <span id="pitchValue">1</span></label>
  <input type="range" id="pitch" min="0" max="2" value="1" step="0.1">

  <button id="speakBtn">Speak</button>
  <button id="stopBtn">Stop</button>

  <p id="message" style="color: red;"></p>

  <script>
    const textArea = document.getElementById('text');
    const voiceSelect = document.getElementById('voiceSelect');
    const rateSlider = document.getElementById('rate');
    const pitchSlider = document.getElementById('pitch');
    const speakBtn = document.getElementById('speakBtn');
    const stopBtn = document.getElementById('stopBtn');
    const rateValue = document.getElementById('rateValue');
    const pitchValue = document.getElementById('pitchValue');
    const message = document.getElementById('message');

    let voices = [];
    let utterance = new SpeechSynthesisUtterance();

    function populateVoices() {
      voices = speechSynthesis.getVoices();
      voiceSelect.innerHTML = '';
      if (voices.length === 0) {
        message.textContent = 'No voices available.';
        return;
      } else {
        message.textContent = '';
      }
      voices.forEach((voice, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = `${voice.name} (${voice.lang})`;
        voiceSelect.appendChild(option);
      });
    }

    // Load voices when available
    speechSynthesis.onvoiceschanged = populateVoices;
    populateVoices();

    // Update utterance settings
    function updateUtterance() {
      utterance.text = textArea.value.trim();
      const selectedVoiceIndex = voiceSelect.value;
      if (voices[selectedVoiceIndex]) {
        utterance.voice = voices[selectedVoiceIndex];
      }
      utterance.rate = parseFloat(rateSlider.value);
      utterance.pitch = parseFloat(pitchSlider.value);
    }

    speakBtn.addEventListener('click', () => {
      if (!textArea.value.trim()) {
        message.textContent = 'Please enter some text to speak.';
        return;
      }
      message.textContent = '';
      speechSynthesis.cancel(); // Stop any ongoing speech
      updateUtterance();
      speechSynthesis.speak(utterance);
    });

    stopBtn.addEventListener('click', () => {
      speechSynthesis.cancel();
    });

    voiceSelect.addEventListener('change', () => {
      if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
        updateUtterance();
        speechSynthesis.speak(utterance);
      }
    });

    rateSlider.addEventListener('input', () => {
      rateValue.textContent = rateSlider.value;
      if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
        updateUtterance();
        speechSynthesis.speak(utterance);
      }
    });

    pitchSlider.addEventListener('input', () => {
      pitchValue.textContent = pitchSlider.value;
      if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
        updateUtterance();
        speechSynthesis.speak(utterance);
      }
    });
  </script>
</body>
</html>

